// TEXT_CONFIG - All UI text strings (MANDATORY)
const TEXT_CONFIG = {
  app_name: "TrendHunter",
  tab_feed: "Ð›ÐµÐ½Ñ‚Ð°",
  tab_dashboard: "Ð”Ð°ÑˆÐ±Ð¾Ñ€Ð´",
  
  btn_save: "Ð’ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ",
  btn_saved: "Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¾",
  btn_open_post: "ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ Ð¿Ð¾ÑÑ‚",
  
  filter_category: "ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ",
  filter_all: "Ð’ÑÐµ",
  cat_home: "Ð”Ð¾Ð¼",
  cat_kids: "Ð”ÐµÑ‚Ð¸",
  cat_tech: "Ð¢ÐµÑ…Ð½Ð¸ÐºÐ°",
  
  sort_label: "Ð¡Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²ÐºÐ°",
  sort_sat_asc: "ÐŸÐ¾ Ð½Ð°ÑÑ‹Ñ‰ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸ (Ð»ÑƒÑ‡ÑˆÐµ â†’ Ñ…ÑƒÐ¶Ðµ)",
  sort_sat_desc: "ÐŸÐ¾ Ð½Ð°ÑÑ‹Ñ‰ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸ (Ñ…ÑƒÐ¶Ðµ â†’ Ð»ÑƒÑ‡ÑˆÐµ)",
  sort_price_asc: "ÐŸÐ¾ Ñ†ÐµÐ½Ðµ (Ð´ÐµÑˆÐµÐ²Ð»Ðµ â†’ Ð´Ð¾Ñ€Ð¾Ð¶Ðµ)",
  sort_price_desc: "ÐŸÐ¾ Ñ†ÐµÐ½Ðµ (Ð´Ð¾Ñ€Ð¾Ð¶Ðµ â†’ Ð´ÐµÑˆÐµÐ²Ð»Ðµ)",
  sort_views_desc: "ÐŸÐ¾ Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€Ð°Ð¼ (ÑÐ½Ð°Ñ‡Ð°Ð»Ð° Ð±Ð¾Ð»ÑŒÑˆÐµ)",
  
  metric_views: "ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€Ñ‹",
  metric_likes: "Ð›Ð°Ð¹ÐºÐ¸",
  metric_comments: "ÐšÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¸",
  metric_saturation: "ÐÐ°ÑÑ‹Ñ‰ÐµÐ½Ð½Ð¾ÑÑ‚ÑŒ",
  price_label: "Ð¦ÐµÐ½Ð°",
  
  fallback_embed_title: "ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð²ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ Ð¿Ð¾ÑÑ‚",
  fallback_embed_body: "ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Ð¿Ð¾ÑÑ‚ Ð¿Ð¾ ÑÑÑ‹Ð»ÐºÐµ Ð¸Ð»Ð¸ Ð¿Ð¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ð¿Ð¾Ð·Ð¶Ðµ.",
  
  empty_saved_title: "ÐŸÐ¾ÐºÐ° Ð¿ÑƒÑÑ‚Ð¾",
  empty_saved_body: "Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚Ðµ Ñ‚Ð¾Ð²Ð°Ñ€Ñ‹ Ð¸Ð· Ð»ÐµÐ½Ñ‚Ñ‹ Ð² Â«Ð’ Ñ€Ð°Ð±Ð¾Ñ‚ÑƒÂ».",
  
  alert_saved: "Ð¢Ð¾Ð²Ð°Ñ€ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½ Ð² Â«Ð’ Ñ€Ð°Ð±Ð¾Ñ‚ÑƒÂ»."
};

// POST_CONFIG - Source URLs for embedded posts
const POST_CONFIG = {
  tiktok: [
    "https://www.tiktok.com/@karissa.brighton/video/7599004879440416031",
    "https://www.tiktok.com/@karissa.brighton/video/7598275974974704926",
    "https://www.tiktok.com/@karissa.brighton/video/7597894830575848734",
    "https://www.tiktok.com/@karissa.brighton/video/7597511240868564254",
    "https://www.tiktok.com/@karissa.brighton/video/7597181792952569119",
    "https://www.tiktok.com/@karissa.brighton/video/7596780691359091999",
    "https://www.tiktok.com/@karissa.brighton/video/7595667396921134366",
    "https://www.tiktok.com/@karissa.brighton/video/7594949743646674206",
    "https://www.tiktok.com/@karissa.brighton/video/7594555155895438622",
    "https://www.tiktok.com/@karissa.brighton/video/7594212911170522399"
  ],
  instagram: [
    "https://www.instagram.com/reel/DFpu68xMsxg/",
    "https://www.instagram.com/reel/DIcEswNSPoj/",
    "https://www.instagram.com/reel/DSGApwPEiVJ/",
    "https://www.instagram.com/reel/DKFeKN-KGhj/",
    "https://www.instagram.com/reel/C_56_JCxiwp/",
    "https://www.instagram.com/reel/C-RPOaJv7-L/",
    "https://www.instagram.com/reel/DJ-W83hu0nc/",
    "https://www.instagram.com/reel/DRpNs_uj06H/",
    "https://www.instagram.com/reel/DIkZhm6PkIB/",
    "https://www.instagram.com/reel/DKpVH56MU87/"
  ]
};

// URL Normalization function
function normalizeURL(url) {
  try {
    const urlObj = new URL(url);
    // Strip query parameters and fragments
    urlObj.search = '';
    urlObj.hash = '';
    let normalized = urlObj.toString();
    
    // Ensure trailing slash for Instagram
    if (normalized.includes('instagram.com/reel/') || normalized.includes('instagram.com/p/')) {
      if (!normalized.endsWith('/')) {
        normalized += '/';
      }
    }
    
    return normalized;
  } catch (e) {
    return url;
  }
}

// Validate URL format
function validateURL(url, platform) {
  const normalized = normalizeURL(url);
  
  if (platform === 'tiktok') {
    return /^https:\/\/www\.tiktok\.com\/@[\w.-]+\/video\/\d+$/.test(normalized);
  } else if (platform === 'instagram') {
    return /^https:\/\/www\.instagram\.com\/(reel|p)\/[\w-]+\/$/.test(normalized);
  }
  
  return false;
}

// Process and normalize all URLs in POST_CONFIG
const NORMALIZED_POST_CONFIG = {
  tiktok: POST_CONFIG.tiktok.map(normalizeURL).filter(url => validateURL(url, 'tiktok')),
  instagram: POST_CONFIG.instagram.map(normalizeURL).filter(url => validateURL(url, 'instagram'))
};

// Mock product data generator
function generateProductData(url, index, platform) {
  const categories = [TEXT_CONFIG.cat_home, TEXT_CONFIG.cat_kids, TEXT_CONFIG.cat_tech];
  const category = categories[index % categories.length];
  
  // Product name ideas based on category
  const productNames = {
    [TEXT_CONFIG.cat_home]: [
      "Ð£Ð¼Ð½Ñ‹Ð¹ Ð´Ð¸ÑÐ¿ÐµÐ½ÑÐµÑ€ Ð´Ð»Ñ Ð¼Ñ‹Ð»Ð°",
      "ÐžÑ€Ð³Ð°Ð½Ð°Ð¹Ð·ÐµÑ€ Ð´Ð»Ñ ÐºÑƒÑ…Ð¾Ð½Ð½Ñ‹Ñ… Ð¿Ñ€Ð¸Ð½Ð°Ð´Ð»ÐµÐ¶Ð½Ð¾ÑÑ‚ÐµÐ¹",
      "Ð¡Ð²ÐµÑ‚Ð¾Ð´Ð¸Ð¾Ð´Ð½Ð°Ñ Ð¿Ð¾Ð´ÑÐ²ÐµÑ‚ÐºÐ° Ð´Ð»Ñ ÑˆÐºÐ°Ñ„Ð°",
      "ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð¾ÑÐ²ÐµÐ¶Ð¸Ñ‚ÐµÐ»ÑŒ Ð²Ð¾Ð·Ð´ÑƒÑ…Ð°",
      "Ð¡Ð¸Ð»Ð¸ÐºÐ¾Ð½Ð¾Ð²Ñ‹Ðµ ÐºÑ€Ñ‹ÑˆÐºÐ¸ Ð´Ð»Ñ Ð¿Ð¾ÑÑƒÐ´Ñ‹",
      "ÐœÐ°Ð³Ð½Ð¸Ñ‚Ð½Ñ‹Ð¹ Ð´ÐµÑ€Ð¶Ð°Ñ‚ÐµÐ»ÑŒ Ð´Ð»Ñ Ð½Ð¾Ð¶ÐµÐ¹",
      "Ð¡ÐºÐ»Ð°Ð´Ð½Ð°Ñ ÑÑƒÑˆÐ¸Ð»ÐºÐ° Ð´Ð»Ñ Ð¿Ð¾ÑÑƒÐ´Ñ‹",
      "Ð£Ð¼Ð½Ñ‹Ð¹ Ð´Ð¾Ð·Ð°Ñ‚Ð¾Ñ€ Ð²Ð¾Ð´Ñ‹ Ð´Ð»Ñ Ð´Ð¾Ð¼Ð°ÑˆÐ½Ð¸Ñ… Ð¶Ð¸Ð²Ð¾Ñ‚Ð½Ñ‹Ñ…"
    ],
    [TEXT_CONFIG.cat_kids]: [
      "Ð˜Ð½Ñ‚ÐµÑ€Ð°ÐºÑ‚Ð¸Ð²Ð½Ð°Ñ Ð¾Ð±ÑƒÑ‡Ð°ÑŽÑ‰Ð°Ñ ÐºÐ½Ð¸Ð³Ð°",
      "ÐÐ°Ð±Ð¾Ñ€ Ð´Ð»Ñ Ñ‚Ð²Ð¾Ñ€Ñ‡ÐµÑÑ‚Ð²Ð° 3D Ñ€ÑƒÑ‡ÐºÐ°",
      "Ð”ÐµÑ‚ÑÐºÐ¸Ð¹ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð¾Ñ€ Ð·Ð²ÐµÐ·Ð´Ð½Ð¾Ð³Ð¾ Ð½ÐµÐ±Ð°",
      "Ð¡ÐºÐ»Ð°Ð´Ð½Ð¾Ð¹ Ð¸Ð³Ñ€Ð¾Ð²Ð¾Ð¹ Ð´Ð¾Ð¼Ð¸Ðº-Ð¿Ð°Ð»Ð°Ñ‚ÐºÐ°",
      "ÐœÑƒÐ·Ñ‹ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ€Ð°Ð·Ð²Ð¸Ð²Ð°ÑŽÑ‰Ð¸Ð¹ ÐºÐ¾Ð²Ñ€Ð¸Ðº",
      "ÐšÐ¾Ð½ÑÑ‚Ñ€ÑƒÐºÑ‚Ð¾Ñ€ Ñ LED-Ð¿Ð¾Ð´ÑÐ²ÐµÑ‚ÐºÐ¾Ð¹",
      "Ð”ÐµÑ‚ÑÐºÐ¸Ðµ ÑƒÐ¼Ð½Ñ‹Ðµ Ñ‡Ð°ÑÑ‹ Ñ GPS"
    ],
    [TEXT_CONFIG.cat_tech]: [
      "Ð‘ÐµÑÐ¿Ñ€Ð¾Ð²Ð¾Ð´Ð½Ð°Ñ Ð·Ð°Ñ€ÑÐ´ÐºÐ° 3-Ð²-1",
      "Ð£Ð¼Ð½Ð°Ñ LED-Ð»Ð°Ð¼Ð¿Ð° Ñ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸ÐµÐ¼",
      "ÐŸÐ¾Ñ€Ñ‚Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ð¹ Ð¼Ð¸Ð½Ð¸-Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð¾Ñ€",
      "Bluetooth-Ñ‚Ñ€ÐµÐºÐµÑ€ Ð´Ð»Ñ ÐºÐ»ÑŽÑ‡ÐµÐ¹",
      "USB-Ñ…Ð°Ð± Ñ Ð±Ñ‹ÑÑ‚Ñ€Ð¾Ð¹ Ð·Ð°Ñ€ÑÐ´ÐºÐ¾Ð¹",
      "Ð¡ÐºÐ»Ð°Ð´Ð½Ñ‹Ðµ Bluetooth-Ð½Ð°ÑƒÑˆÐ½Ð¸ÐºÐ¸",
      "Ð£Ð¼Ð½Ð°Ñ Ñ€Ð¾Ð·ÐµÑ‚ÐºÐ° Ñ Ñ‚Ð°Ð¹Ð¼ÐµÑ€Ð¾Ð¼"
    ]
  };
  
  const descriptions = {
    [TEXT_CONFIG.cat_home]: [
      "Ð­Ñ‚Ð¾ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð½Ð°Ñ…Ð¾Ð´ÐºÐ° Ð´Ð»Ñ Ð²Ð°Ð½Ð½Ð¾Ð¹! ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð´Ð¾Ð·Ð¸Ñ€ÑƒÐµÑ‚ Ð¼Ñ‹Ð»Ð¾, Ð¾Ñ‡ÐµÐ½ÑŒ ÑƒÐ´Ð¾Ð±Ð½Ð¾ ðŸ§¼",
      "ÐÐ°ÐºÐ¾Ð½ÐµÑ†-Ñ‚Ð¾ Ð¿Ð¾Ñ€ÑÐ´Ð¾Ðº Ð½Ð° ÐºÑƒÑ…Ð½Ðµ! Ð’ÑÐµ Ð¿Ð¾Ð´ Ñ€ÑƒÐºÐ¾Ð¹ Ð¸ Ð·Ð°Ð½Ð¸Ð¼Ð°ÐµÑ‚ Ð¼Ð°Ð»Ð¾ Ð¼ÐµÑÑ‚Ð°",
      "Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ð» Ð·Ð° 2 Ð¼Ð¸Ð½ÑƒÑ‚Ñ‹, Ñ‚ÐµÐ¿ÐµÑ€ÑŒ Ð²ÑÑ‘ Ð²Ð¸Ð´Ð½Ð¾ Ð´Ð°Ð¶Ðµ Ð½Ð¾Ñ‡ÑŒÑŽ âœ¨",
      "Ð Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð¿Ð¾ Ð´Ð°Ñ‚Ñ‡Ð¸ÐºÑƒ, Ð·Ð°Ð¿Ð°Ñ… Ð²ÑÐµÐ³Ð´Ð° ÑÐ²ÐµÐ¶Ð¸Ð¹, Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÑŽ!",
      "ÐŸÐ¾Ð´Ñ…Ð¾Ð´ÑÑ‚ Ð½Ð° Ð»ÑŽÐ±ÑƒÑŽ Ð¿Ð¾ÑÑƒÐ´Ñƒ, Ð±Ð¾Ð»ÑŒÑˆÐµ Ð½Ðµ Ð½ÑƒÐ¶Ð½Ð° Ð¿Ð¸Ñ‰ÐµÐ²Ð°Ñ Ð¿Ð»ÐµÐ½ÐºÐ° ðŸ‘Œ",
      "ÐžÑÐ²Ð¾Ð±Ð¾Ð´Ð¸Ð» ÑÑ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¼ÐµÑÑ‚Ð°! ÐÐ¾Ð¶Ð¸ Ð²ÑÐµÐ³Ð´Ð° Ð¿Ð¾Ð´ Ñ€ÑƒÐºÐ¾Ð¹",
      "Ð¡ÐºÐ»Ð°Ð´Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ð¿Ð¾ÑÐ»Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ, Ð½Ðµ Ð·Ð°Ð½Ð¸Ð¼Ð°ÐµÑ‚ Ð¼ÐµÑÑ‚Ð¾ Ð½Ð° ÑÑ‚Ð¾Ð»Ðµ"
    ],
    [TEXT_CONFIG.cat_kids]: [
      "Ð ÐµÐ±ÐµÐ½Ð¾Ðº Ð² Ð²Ð¾ÑÑ‚Ð¾Ñ€Ð³Ðµ! Ð£Ñ‡Ð¸Ñ‚ Ð±ÑƒÐºÐ²Ñ‹ Ð¸Ð³Ñ€Ð°Ñ, Ð¾Ñ‡ÐµÐ½ÑŒ Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÐ½Ð¾ ðŸ“š",
      "ÐÐµÐ²ÐµÑ€Ð¾ÑÑ‚Ð½Ð°Ñ Ð²ÐµÑ‰ÑŒ! ÐœÐ¾Ð¶Ð½Ð¾ ÑÐ¾Ð·Ð´Ð°Ð²Ð°Ñ‚ÑŒ 3D-Ñ„Ð¸Ð³ÑƒÑ€Ñ‹ Ð¿Ñ€ÑÐ¼Ð¾ Ð² Ð²Ð¾Ð·Ð´ÑƒÑ…Ðµ",
      "Ð—Ð°ÑÑ‹Ð¿Ð°ÐµÑ‚ Ð¿Ð¾Ð´ Ð·Ð²ÐµÐ·Ð´Ð½Ñ‹Ð¼ Ð½ÐµÐ±Ð¾Ð¼, Ð¾Ñ‡ÐµÐ½ÑŒ ÐºÑ€Ð°ÑÐ¸Ð²Ð¾ ðŸŒŸ",
      "Ð”ÐµÑ‚Ð¸ Ð¸Ð³Ñ€Ð°ÑŽÑ‚ Ñ‡Ð°ÑÐ°Ð¼Ð¸! Ð›ÐµÐ³ÐºÐ¾ ÑÐ¾Ð±Ð¸Ñ€Ð°ÐµÑ‚ÑÑ Ð¸ Ñ€Ð°Ð·Ð±Ð¸Ñ€Ð°ÐµÑ‚ÑÑ",
      "Ð Ð°Ð·Ð²Ð¸Ð²Ð°ÐµÑ‚ Ð¼Ð¾Ñ‚Ð¾Ñ€Ð¸ÐºÑƒ Ð¸ Ð¼ÑƒÐ·Ñ‹ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ ÑÐ»ÑƒÑ…, ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð¾Ñ‚Ð»Ð¸Ñ‡Ð½Ð¾Ðµ",
      "Ð¡Ð²ÐµÑ‚Ð¸Ñ‚ÑÑ Ð² Ñ‚ÐµÐ¼Ð½Ð¾Ñ‚Ðµ! ÐœÐ¾Ð¶Ð½Ð¾ ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ Ñ‡Ñ‚Ð¾ ÑƒÐ³Ð¾Ð´Ð½Ð¾ ðŸ”¦"
    ],
    [TEXT_CONFIG.cat_tech]: [
      "Ð—Ð°Ñ€ÑÐ¶Ð°ÐµÑ‚ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½, Ñ‡Ð°ÑÑ‹ Ð¸ Ð½Ð°ÑƒÑˆÐ½Ð¸ÐºÐ¸ Ð¾Ð´Ð½Ð¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾! ÐšÐ»Ð°ÑÑ ðŸ”‹",
      "ÐœÐµÐ½ÑÐµÑ‚ Ñ†Ð²ÐµÑ‚ Ñ‡ÐµÑ€ÐµÐ· Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ, ÑÐ¾Ð·Ð´Ð°ÐµÑ‚ Ð°Ñ‚Ð¼Ð¾ÑÑ„ÐµÑ€Ñƒ",
      "Ð Ð°Ð·Ð¼ÐµÑ€Ð¾Ð¼ Ñ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½, Ð° Ð¿Ñ€Ð¾ÐµÑ†Ð¸Ñ€ÑƒÐµÑ‚ Ð½Ð° Ð²ÑÑŽ ÑÑ‚ÐµÐ½Ñƒ! ðŸ“½ï¸",
      "ÐŸÑ€Ð¸ÐºÑ€ÐµÐ¿Ð¸Ð» Ðº ÐºÐ»ÑŽÑ‡Ð°Ð¼, Ñ‚ÐµÐ¿ÐµÑ€ÑŒ Ð²ÑÐµÐ³Ð´Ð° Ð½Ð°Ñ…Ð¾Ð¶Ñƒ Ð¸Ñ… Ð·Ð° ÑÐµÐºÑƒÐ½Ð´Ñƒ",
      "6 Ð¿Ð¾Ñ€Ñ‚Ð¾Ð² USB, Ð·Ð°Ñ€ÑÐ¶Ð°ÐµÑ‚ Ð²ÑÑ‘ Ð¸ ÑÑ€Ð°Ð·Ñƒ, Ð±Ñ‹ÑÑ‚Ñ€Ð¾!",
      "Ð—Ð²ÑƒÐº Ð¾Ñ‚Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹, ÑÐºÐ»Ð°Ð´Ñ‹Ð²Ð°ÑŽÑ‚ÑÑ ÐºÐ¾Ð¼Ð¿Ð°ÐºÑ‚Ð½Ð¾ Ð´Ð»Ñ Ð¿Ð¾ÐµÐ·Ð´Ð¾Ðº ðŸŽ§"
    ]
  };
  
  const nameList = productNames[category];
  const descList = descriptions[category];
  
  const productName = nameList[index % nameList.length];
  const productDescription = descList[index % descList.length];
  
  // Generate realistic stats
  const views = Math.floor(Math.random() * (6000000 - 20000) + 20000);
  const likes = Math.floor(Math.random() * (400000 - 300) + 300);
  const comments = Math.floor(Math.random() * (25000 - 10) + 10);
  
  // Price range by category
  const priceRanges = {
    [TEXT_CONFIG.cat_home]: [500, 3000],
    [TEXT_CONFIG.cat_kids]: [800, 5000],
    [TEXT_CONFIG.cat_tech]: [1000, 8000]
  };
  
  const [minPrice, maxPrice] = priceRanges[category];
  const priceRub = Math.floor(Math.random() * (maxPrice - minPrice) + minPrice);
  
  // Calculate saturation score
  const saturationScore = views / (likes + comments);
  
  return {
    id: `${platform}-${index}`,
    platform: platform,
    url: url,
    productName: productName,
    productDescription: productDescription,
    category: category,
    priceRub: priceRub,
    statsNow: {
      views: views,
      likes: likes,
      comments: comments
    },
    saturationScore: parseFloat(saturationScore.toFixed(1)),
    saved: false
  };
}

// Generate feed items from normalized URLs
function generateFeedItems() {
  const items = [];
  
  NORMALIZED_POST_CONFIG.tiktok.forEach((url, index) => {
    items.push(generateProductData(url, index, 'tiktok'));
  });
  
  NORMALIZED_POST_CONFIG.instagram.forEach((url, index) => {
    items.push(generateProductData(url, index + NORMALIZED_POST_CONFIG.tiktok.length, 'instagram'));
  });
  
  return items;
}

// Export for use in tests (Node.js environment)
if (typeof module !== 'undefined' && module.exports) {
  module.exports = {
    TEXT_CONFIG,
    POST_CONFIG,
    NORMALIZED_POST_CONFIG,
    normalizeURL,
    validateURL,
    generateFeedItems
  };
}
